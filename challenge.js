const allQuestions = [
{q:"أيهما أثقل؟",c:["كيلو حديد","كيلو قطن","نفس الوزن","ولا واحد"],a:"نفس الوزن"},
{q:"شي يمشي بلا قدمين؟",c:["المطر","الظل","الوقت","الهواء"],a:"الوقت"},
{q:"كم شهر فيه 28 يوم؟",c:["1","12","6","0"],a:"12"},
{q:"شي يكبر كل ما أخذت منه؟",c:["العمر","الحفرة","الظل","الديون"],a:"الحفرة"},
{q:"ما الذي إذا ذكرته كسرته؟",c:["الصمت","الوعد","الزجاج","القلب"],a:"الصمت"},
{q:"أيهما يسبق؟",c:["الفجر","الظهر","العصر","المغرب"],a:"الفجر"},
{q:"ما لا يُبلل إذا دخل الماء؟",c:["الظل","الهواء","النار","الضوء"],a:"الظل"},
{q:"شي يطير بلا جناح؟",c:["الوقت","الصوت","الدخان","الخيال"],a:"الوقت"},
{q:"أيهما لا يُكسر؟",c:["الزجاج","الوعد","الحجر","الخشب"],a:"الوعد"},
{q:"ما الذي يكتب ولا يقرأ؟",c:["القلم","الكتاب","الكمبيوتر","اللوح"],a:"القلم"},

{q:"ما الذي يسمع بلا أذن؟",c:["القلب","الصدى","العين","الريح"],a:"الصدى"},
{q:"شي يولد كبير ويموت صغير؟",c:["الشمعة","العمر","الظل","النار"],a:"الشمعة"},
{q:"ما الذي لا يعود إذا خرج؟",c:["الصوت","الوقت","الهواء","الضوء"],a:"الوقت"},
{q:"أيهما أسرع؟",c:["الصوت","الضوء","الريح","الفكر"],a:"الضوء"},
{q:"شي لا يمشي إلا بالضرب؟",c:["المسمار","الكرة","الطبل","الباب"],a:"المسمار"},
{q:"ما الذي يسبقك دائمًا؟",c:["ظلك","اسمك","ماضيك","مستقبلك"],a:"ظلك"},
{q:"شي إذا أخذت منه كبر؟",c:["العمر","الحفرة","الظل","الوقت"],a:"الحفرة"},
{q:"ما الذي يُرى ولا يُمس؟",c:["الضوء","الماء","التراب","الحديد"],a:"الضوء"},
{q:"ما الذي يمتلئ بلا فراغ؟",c:["العقل","البحر","الهواء","الكوب"],a:"العقل"},
{q:"ما الذي يسير بلا قدمين ويبكي بلا عين؟",c:["السحاب","الريح","المطر","الظل"],a:"السحاب"},

{q:"ما الذي إذا كبر صغر؟",c:["العمر","الثقب","الظل","الوقت"],a:"الثقب"},
{q:"ما الذي لا يُرى إلا إذا كبر؟",c:["الغبار","الظل","النور","الماء"],a:"الغبار"},
{q:"ما الذي يتكلم بلا لسان؟",c:["الكتاب","القلم","الصورة","الرسالة"],a:"الكتاب"},
{q:"أيهما أكبر؟",c:["0.5","1/2","1/4","0.25"],a:"0.5"},
{q:"ما يمشي على أربع ثم اثنتين ثم ثلاث؟",c:["الإنسان","الكلب","الحصان","القط"],a:"الإنسان"},
{q:"ما الذي إذا مشى نقص؟",c:["العمر","المسافة","الظل","الوقت"],a:"المسافة"},
{q:"شي لا وزن له؟",c:["الهواء","الماء","الحديد","الخشب"],a:"الهواء"},
{q:"ما الذي يموت إذا شرب؟",c:["النار","الظل","النبات","الحديد"],a:"النار"},
{q:"ما الذي لا يدخل إلا إذا خرج؟",c:["النفس","الصوت","الضوء","الظل"],a:"النفس"},
{q:"شي تراه ولا تلمسه؟",c:["الهواء","الضوء","الماء","التراب"],a:"الضوء"},

{q:"ما الذي يقطع ولا يُرى؟",c:["الهواء","السكين","الصوت","الظل"],a:"الصوت"},
{q:"ما الذي لا يكذب أبدًا؟",c:["الوقت","الساعة","الميزان","الظل"],a:"الوقت"},
{q:"شي إذا غليته جمد؟",c:["البيض","الماء","الحليب","الزيت"],a:"البيض"},
{q:"ما الذي يسقط دائمًا ولا ينكسر؟",c:["الظل","الوقت","الليل","المطر"],a:"الليل"},
{q:"ما الذي يذهب ولا يعود؟",c:["الماضي","الهواء","الصوت","الضوء"],a:"الماضي"},
{q:"ما الذي إذا سميته اختفى؟",c:["الصمت","الظل","النور","الصوت"],a:"الصمت"},
{q:"ما الذي له أسنان ولا يعض؟",c:["المشط","المنشار","المفتاح","السحاب"],a:"المشط"},
{q:"ما الذي يمشي بلا رأس؟",c:["النهر","الطريق","الظل","الريح"],a:"النهر"},
{q:"ما الذي لا يمشي إلا إذا وقف؟",c:["الساعة","السيارة","المروحة","القلم"],a:"الساعة"},
{q:"ما الذي له عين ولا يرى؟",c:["الإبرة","العاصفة","الإعصار","السماء"],a:"الإبرة"}
];

function shuffle(a){return a.sort(()=>Math.random()-0.5);}
const questions = shuffle([...allQuestions]).slice(0,10);

let i=0, score=0, answers=[];
let time=5, timer;

const questionEl=document.getElementById("question");
const optionsEl=document.getElementById("options");
const timerEl=document.getElementById("timer");
const gameEl=document.getElementById("game");
const resultsEl=document.getElementById("results");
const centerMsg=document.getElementById("centerMsg");

function startTimer(){
    time=5;
    timerEl.innerText="⏱️ "+time;
    timer=setInterval(()=>{
        time--;
        timerEl.innerText="⏱️ "+time;
        if(time===0){
            clearInterval(timer);
            next(null);
        }
    },1000);
}

function show(){
    const q=questions[i];
    questionEl.innerText=q.q;
    optionsEl.innerHTML="";
    startTimer();
    shuffle([...q.c]).forEach(o=>{
        const b=document.createElement("button");
        b.className="option";
        b.innerText=o;
        b.onclick=()=>next(o);
        optionsEl.appendChild(b);
    });
}

function next(sel){
    clearInterval(timer);
    const q=questions[i];
    if(sel===q.a) score++;
    answers.push({q:q.q,sel,cor:q.a});
    i++;
    i<questions.length?show():end();
}

function end(){
    gameEl.style.display="none";
    let msg="";
    if(score>=7) msg="حي عينك كفو كفو !";
    else if(score>=4) msg="مااااش!";
    else msg="لحد يشوف درجتك بس";

    centerMsg.innerText=msg+" ("+score+"/10)";
    centerMsg.style.display="flex";

    setTimeout(()=>{
        centerMsg.style.display="none";
        answers.forEach(a=>{
            const d=document.createElement("div");
            d.className="result";
            d.innerHTML=`
            <strong>${a.q}</strong><br>
            <span class="${a.sel===a.cor?'correct':'incorrect'}">
            اختيارك: ${a.sel ?? "ما جاوبت"}
            </span><br>
            <span class="correct">الصحيح: ${a.cor}</span>`;
            resultsEl.appendChild(d);
        });
    },3000);
}

show();
